<!-- <sppiner *ngIf="isLoad"></sppiner> -->
<div class="app-body">
  <main class="main d-flex align-items-center">
    <div class="container">
      <div class="row">
        <div style="margin-top: 10px;"  class="alert alert-success" *ngIf='message'>{{message}}</div>
        <div class="col-md-8 mx-auto">
          <div class="alert alert-danger" *ngIf='invalidtLogin'>has an errors </div>
          <div class="card mx-4">
            <div class="card-body p-4">
              <form [formGroup]="form" (submit)="create()">
                <h1>User</h1>
                <p class="text-muted">Save Account</p>
                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fa fa-user-circle"></i></span>
                  </div>
                  <input 
                  [class.is-invalid]="(isValid('name') || errors?.name)" 
                 [class.is-valid]="isInputValid('name')" 
                  [(ngModel)]="user.name" formControlName="name" name="name"  type="text" class="form-control" 
                  placeholder="Name" autocomplete="username" required>
                </div>
                <span style="color: red;" *ngIf="isValid('name') || errors?.name ">
                  <span *ngFor="let err of messageError('name')">{{ err }}</span>
                  <span *ngFor="let err of errors?.name">{{ err }}</span>
                </span>
                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fa fa-users"></i></span>
                  </div>
                  <input 
                  [class.is-invalid]="(isValid('login') || errors?.login)" 
                 [class.is-valid]="isInputValid('login')" 
                  [(ngModel)]="user.login" formControlName="login" name="login"  type="text" class="form-control"
                   placeholder="Login" autocomplete="username" required>
                </div>
                <span style="color: red;" *ngIf="isValid('login') || errors?.login">
                  <span *ngFor="let err of messageError('login')">{{ err }}</span>
                  <span *ngFor="let err of errors?.login">{{ err }}</span>
                </span>

                <div class="input-group mb-3" *ngIf="!user._id">
                  <div class="input-group-prepend">
                    <span class="input-group-text"><i class="icon-lock"></i></span>
                  </div>
                  <input
                  [class.is-invalid]="(isValid('password') || errors?.password)" 
                   [class.is-valid]="isInputValid('password')" 
                   [(ngModel)]="user.password" formControlName="password" name="password" type="password" class="form-control" placeholder="Password" autocomplete="new-password" required>
                  <span style="color: red;" *ngIf="isValid('password') || errors?.password">
                    <span *ngFor="let err of messageError('password')">{{ err }}</span>
                    <span *ngFor="let err of errors?.password">{{ err }}</span>
                  </span>
                 </div>

                 <div class="form-group">
                  <label for="companie">Companie</label>
                  <select class="form-control" id="companie" [(ngModel)]="user.company"
                  [class.is-invalid]="(isValid('company') || errors?.company)" 
                   [class.is-valid]="isInputValid('company')" 
                  formControlName="company" name="company"  class="form-control" id="company"
                  >
        
                    <option *ngFor="let c of companies" [selected]="c._id==user?.company?._id" [value]="c._id">{{c.name}}</option>
                    
                  </select>
                  <div [class.invalid-feedback]="isValid('company') || errors?.company"  *ngIf="isValid('company') || errors?.company ">
                    <span *ngFor="let err of messageError('company')">{{ err }}</span>
                    <span *ngFor="let err of errors?.company">{{ err }}</span>
                  </div>
                </div> 
                
               
                <button type="submit"  class="btn btn-block btn-success">Save Account</button>
              </form>
            </div>
            
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
